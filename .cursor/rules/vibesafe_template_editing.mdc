# VibeSafe Template Editing Rule

## âš ï¸ CRITICAL: Always Edit Templates, Not Deployed Files

When working on the VibeSafe repository itself, you must understand the distinction between **template files** and **deployed files**.

### ğŸ”§ Template Files (ALWAYS EDIT THESE)

These are the source files that get copied to user projects during installation:

```
templates/
â”œâ”€â”€ .cursor/rules/              # â† Edit cursor rules HERE
â”œâ”€â”€ scripts/                    # â† Edit user-facing scripts HERE
â”‚   â”œâ”€â”€ whats_next.py          # â† Edit whats-next script HERE
â”‚   â””â”€â”€ validate_vibesafe_structure.py  # â† Edit validator HERE
â”œâ”€â”€ backlog/
â”‚   â”œâ”€â”€ README.md              # â† Edit backlog docs HERE
â”‚   â”œâ”€â”€ task_template.md       # â† Edit task template HERE
â”‚   â””â”€â”€ update_index.py        # â† Edit update script HERE
â”œâ”€â”€ cip/
â”‚   â”œâ”€â”€ README.md              # â† Edit CIP docs HERE
â”‚   â””â”€â”€ cip_template.md        # â† Edit CIP template HERE
â”œâ”€â”€ tenets/
â”‚   â”œâ”€â”€ README.md              # â† Edit tenet docs HERE
â”‚   â”œâ”€â”€ tenet_template.md      # â† Edit tenet template HERE
â”‚   â””â”€â”€ combine_tenets.py      # â† Edit tenet script HERE
â””â”€â”€ requirements/              # â† Edit requirements framework HERE
```

### ğŸ“¦ Deployed Files (NEVER EDIT THESE DIRECTLY)

These are copies that exist in the VibeSafe repo root for **dogfooding** (testing VibeSafe on itself):

```
.cursor/rules/                 # âŒ DON'T edit - deployed from templates
backlog/README.md              # âŒ DON'T edit - deployed from templates
backlog/task_template.md       # âŒ DON'T edit - deployed from templates
cip/README.md                  # âŒ DON'T edit - deployed from templates
cip/cip_template.md            # âŒ DON'T edit - deployed from templates
tenets/README.md               # âŒ DON'T edit - deployed from templates
tenets/tenet_template.md       # âŒ DON'T edit - deployed from templates
```

### âœ… Correct Workflow

**1. Edit the template:**
```bash
# âœ… CORRECT
vim templates/.cursor/rules/vibesafe_general.mdc
```

**2. Run dogfood install to test:**
```bash
# âœ… Deploy templates to local VibeSafe repo for testing
bash <(curl -s https://raw.githubusercontent.com/lawrennd/vibesafe/main/scripts/install-minimal.sh)

# OR use local install script
bash scripts/install-minimal.sh
```

**3. Verify the changes:**
```bash
# Check that deployed file matches template
diff templates/.cursor/rules/vibesafe_general.mdc .cursor/rules/vibesafe_general.mdc
```

### âŒ Wrong Workflow

```bash
# âŒ WRONG - Editing deployed file
vim .cursor/rules/vibesafe_general.mdc

# This change will be LOST on next install!
# Other users won't get this change!
```

### ğŸ¯ Quick Check

Before editing a VibeSafe system file, ask yourself:

1. **Am I in the templates/ directory?**
   - Yes â†’ âœ… Proceed with edit
   - No â†’ âŒ Stop! Find the template version

2. **Is this file in the VibeSafe gitignore?**
   - Yes â†’ âŒ It's deployed, find the template
   - No â†’ Check if it's a template

3. **When in doubt:**
   - Search for the file in `templates/` first
   - If it exists there, edit the template
   - Then run dogfood install to deploy

### ğŸ“ Exception: Files That Don't Have Templates

These files are unique to the VibeSafe repo and should be edited directly:

- `README.md` (root) - VibeSafe project README
- `scripts/install-minimal.sh` - Installation script
- `install-whats-next.sh` - Installation script
- `scripts/add_*.py` - VibeSafe development tools (not deployed)
- CIP files (`cip000*.md`) - VibeSafe's own CIPs
- Backlog tasks (`backlog/*/YYYY-MM-DD_*.md`) - VibeSafe's own tasks
- Tenet files (actual tenets, not template) - VibeSafe's own tenets

### âš ï¸ Special Case: User-Facing Scripts

User-facing scripts (`whats_next.py`, `validate_vibesafe_structure.py`) should be:
1. **Edited in `scripts/`** (for dogfooding)
2. **Copied to `templates/scripts/`** (for user deployment)
3. **Both kept in sync**

After editing these scripts, always copy to templates:
```bash
cp scripts/whats_next.py templates/scripts/
cp scripts/validate_vibesafe_structure.py templates/scripts/
```

### ğŸ”„ Dogfooding Process

VibeSafe uses itself for project management, which means:

1. Templates are the **source of truth**
2. Deployed files in the repo are for **testing VibeSafe on itself**
3. Changes to templates must be **dogfooded** (installed locally) to test
4. This ensures what we ship to users is what we use ourselves

### ğŸ“ Summary

- âœ… **DO**: Edit files in `templates/`
- âœ… **DO**: Run dogfood install after template changes
- âœ… **DO**: Test that deployed files match expectations
- âŒ **DON'T**: Edit deployed cursor rules directly
- âŒ **DON'T**: Edit deployed system READMEs or templates directly
- âŒ **DON'T**: Forget to dogfood your changes
