---
id: "0010"
title: "Automatic Tenets-to-Cursor-Rules Generation"
status: "Closed"
created: "2025-07-28"
last_updated: "2026-01-03"
author: "Neil"
related_requirements:
  - "000B"
---

# CIP-0010: Automatic Tenets-to-Cursor-Rules Generation

## Status
- [x] Proposed
- [x] Accepted
- [x] Implemented
- [x] Closed (2026-01-03)

## Description

Implements REQ-000B (AI Access to Project Tenets) by automatically generating Cursor AI rules from project tenets during VibeSafe installation. This ensures that project-specific guiding principles are available as AI assistance rules, creating a seamless bridge between project governance (tenets) and AI-assisted development (cursor rules).

## Motivation

Currently, VibeSafe installations only provide generic cursor rules. However, each project has its own unique tenets that should guide AI assistance. By automatically generating cursor rules from existing tenets during installation, we:

1. *Preserve Project Identity*: Ensure AI assistance aligns with project-specific principles
2. *Reduce Manual Work*: Automatically create relevant cursor rules from existing tenets
3. *Improve AI Effectiveness*: Provide context-aware guidance based on actual project governance
4. *Maintain Consistency*: Ensure cursor rules stay in sync with project tenets

## Implementation

### Phase 1: Core Tenet-to-Rule Generation

1. *Extend `combine_tenets.py`*:
   - Add function to generate cursor rule content from tenet metadata
   - Support both individual tenet files and combined tenet documents
   - Generate rule files in `.mdc` format with proper YAML frontmatter

2. *Create Tenet Rule Template*:
   ```yaml
   ---
   description: "Project Tenet: [TENET_TITLE] - [TENET_DESCRIPTION]"
   globs: "*/*"
   alwaysApply: true
   ---
   
   # Project Tenet: [TENET_TITLE]
   
   ## Description
   [TENET_DESCRIPTION]
   
   ## Quote
   *"[TENET_QUOTE]"*
   
   ## Examples
   [TENET_EXAMPLES]
   
   ## Counter-examples
   [TENET_COUNTER_EXAMPLES]
   
   ## Conflicts
   [TENET_CONFLICTS]
   
   ## Application
   When working on this project, always consider this tenet in your decision-making and code generation.
   ```

3. *Add to Installation Script*:
   - Call tenet processing during `install_vibesafe()`
   - Generate cursor rules for all discovered tenets
   - Preserve existing cursor rules (don't overwrite VibeSafe system rules)

### Phase 2: Smart Tenet Discovery

1. *Project-Specific Tenet Detection*:
   - Look for tenets in `tenets/` directory (not just `tenets/vibesafe/`)
   - Support both individual `.md` files and combined documents
   - Handle nested tenet directories (e.g., `tenets/domain/`, `tenets/team/`)

2. *Tenet Metadata Extraction*:
   - Parse tenet files using existing `combine_tenets.py` logic
   - Extract title, description, quote, examples, counter-examples
   - Handle missing metadata gracefully

3. *Rule Naming Convention*:
   - Generate rules as `project_tenet_[tenet-id].mdc`
   - Use tenet ID as filename (e.g., `user-autonomy` → `project_tenet_user-autonomy.mdc`)
   - Avoid conflicts with VibeSafe system rules

### Phase 3: Installation Integration

1. *Add to `install-minimal.sh`*:
   ```bash
   # Function to generate cursor rules from project tenets
   generate_tenet_cursor_rules() {
     echo "Generating cursor rules from project tenets..."
     
     # Process existing tenets if any
     if [ -d "tenets" ]; then
       python3 tenets/combine_tenets.py --generate-cursor-rules
     fi
   }
   ```

2. *Update Installation Flow*:
   ```bash
   install_vibesafe() {
     # ... existing installation steps ...
     
     # Generate project-specific cursor rules
     generate_tenet_cursor_rules
     
     # ... rest of installation ...
   }
   ```

3. *Preserve User Content*:
   - Never overwrite existing project-specific cursor rules
   - Only generate rules for tenets that don't already have corresponding rules
   - Allow manual updates to generated rules

### Phase 4: Testing and Validation

1. *Test Cases*:
   - Installation with existing tenets
   - Installation with no tenets
   - Installation with malformed tenet files
   - Reinstallation with new tenets
   - Conflict resolution with existing cursor rules

2. *Validation*:
   - Generated rules are valid `.mdc` format
   - Rules contain all tenet information
   - Rules don't conflict with VibeSafe system rules
   - Installation preserves existing user rules

## Implementation Status

### All Phases Complete ✅

- [x] Extend `combine_tenets.py` with cursor rule generation (functions: `generate_cursor_rule_content()`, `generate_cursor_rules_from_tenets()`)
- [x] Create tenet-to-rule template system (implemented in `generate_cursor_rule_content()`)
- [x] Add tenet discovery and processing to installation script (`generate_tenet_cursor_rules()` in `install-minimal.sh`)
- [x] Implement rule naming and conflict resolution (naming: `project_tenet_[id].mdc`, protected by gitignore)
- [x] Add `--generate-cursor-rules` flag to `combine_tenets.py`
- [x] Integration with installation flow (called during `install_vibesafe()`)
- [x] Idempotent regeneration on reinstall
- [x] Smart detection of dogfooding vs user projects

### Testing Status
- [x] Manual testing complete (VibeSafe dogfoods this feature)
- [ ] Automated test suite (deferred as nice-to-have)

## References

- REQ-000B: AI Access to Project Tenets (WHAT this achieves)
- Tenet: shared-information-landmarks (WHY - AI needs landmarks for reliable collaboration)
- [CIP-000E: Clean Installation Philosophy](./cip000E.md)
- [Tenet System Documentation](../tenets/README.md)
- [Cursor Rules Documentation](../.cursor/rules/)

## Relationship to VibeSafe Tenets

This CIP implements the **shared-information-landmarks** tenet by creating explicit, AI-accessible reference points (cursor rules) from project tenets. This ensures both humans and AI systems share the same conceptual framework and project values.

**Proper Linking Chain:**
- **WHY**: shared-information-landmarks tenet (reliable collaboration requires shared reference points)
- **WHAT**: REQ-000B (AI assistants need access to project tenets)
- **HOW**: CIP-0010 (automatic cursor rule generation from tenets)

## Implementation Notes (2026-01-03)

**Fully implemented and verified:**
- The feature has been working in VibeSafe since 2025-07-28
- VibeSafe dogfoods this feature (its own tenets become cursor rules)
- REQ-000B was created retroactively (2026-01-03) to document the requirement
- All acceptance criteria for REQ-000B are met

## Author and Date

*Author*: Neil Lawrence  
*Created*: 2025-07-28  
*Last Updated*: 2026-01-03 