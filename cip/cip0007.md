# CIP-0007: New Tenet - Self-Documentation Through Implementation

## Status
- [x] Proposed: 2025-05-05
- [ ] Accepted
- [ ] Implemented
- [ ] Closed

## Description
This CIP proposes a new tenet for VibeSafe: "Self-Documentation Through Implementation," which encourages systems to document themselves through their implementation rather than requiring separate documentation.

## Motivation
During the redesign of the installation script (CIP-0006), we identified a pattern that emerged from our improvements: systems become more maintainable when they inherently document themselves through implementation rather than relying solely on external documentation.

In current practice, we often see:
1. Documentation that drifts from actual implementation
2. Duplication of information across code and documentation
3. Need for constant documentation updates as code changes
4. User confusion when systems behave differently than documented

By establishing this as a tenet, we can codify a principle that leads to more reliable and maintainable systems.

## Implementation

### The Proposed Tenet

The tenet would be added as `tenets/vibesafe/self-documentation.md` with the following content:

```markdown
## Tenet: self-documentation

**Title**: Self-Documentation Through Implementation

**Description**: Systems should document themselves through their implementation rather than requiring separate documentation. When the system itself demonstrates how it works, it reduces duplication and the risk of documentation becoming outdated. This principle encourages designing systems where the structure, behavior, and configuration are intrinsically evident from the implementation.

**Quote**: *"The best documentation is the system itself."*

**Examples**:
- Directory structures that reflect their purpose without needing explanation
- Configuration options with clear, self-explanatory names
- Environment variables that document their purpose through naming
- Scripts that explain their behavior through clear function names and organization
- Tests that serve as examples of expected behavior

**Counter-examples**:
- Hard-coded structures that differ from what's documented
- Magic values that require separate explanation
- Configuration options that need extensive documentation to understand
- Implementation that duplicates information stored elsewhere

**Conflicts**:
- May conflict with simplicity when making behavior self-documenting requires more verbose code
- Resolution: Balance clarity with brevity; use good naming conventions and structure

**Version**: 1.0 (2025-05-05)
```

### Real-World Example: Installation Script Redesign

CIP-0006 demonstrates this principle:

**Before**: Directory structure was hard-coded in the script, requiring documentation to explain what directories would be created.

**After**: The script now copies directory structures directly from the templates, so the actual repository structure defines what gets created.

This change means:
1. The system's behavior is intrinsically documented by the template structure
2. Changes to the directory structure automatically propagate without code changes
3. No risk of documentation/implementation drift
4. Tests can verify the actual behavior by examining the real structure

## Pros and Cons Analysis

### Pros
1. **Reduced Documentation Burden**: Less need for separate documentation that can become outdated
2. **Increased Reliability**: What the code does is exactly what users see and expect
3. **Easier Onboarding**: New developers can understand systems by examining implementation
4. **Better Testing**: Tests can directly verify the behavior users experience
5. **Faster Evolution**: Changes in one place automatically propagate everywhere

### Cons
1. **Implementation Complexity**: May require more sophisticated code to make things self-documenting
2. **Learning Curve**: Requires changing established practices and mindsets
3. **Potential Verbosity**: Self-documenting code sometimes requires more verbose solutions
4. **Not Always Applicable**: Some concepts still need external documentation
5. **Balance with Simplicity**: Could conflict with our simplicity tenet if taken too far

### Mitigation Strategies
1. Emphasize that external documentation is still valuable for conceptual understanding
2. Provide guidelines for balancing self-documentation with simplicity
3. Create patterns and examples of self-documenting code that remain simple
4. Focus on the most critical areas where documentation drift causes problems

## Relationship to Existing Tenets

This new tenet complements our existing tenets:

- **User Autonomy**: Self-documenting systems empower users by making behavior transparent and predictable
- **Simplicity**: While there's potential tension, well-designed self-documenting systems are often simpler overall
- **Documentation as First-Class Citizen**: This extends our commitment to documentation by embedding it in implementation

### Relationship with "Documentation as First-Class Citizen"

The proposed "Self-Documentation Through Implementation" tenet has an especially close relationship with our existing "Documentation as First-Class Citizen" tenet. There are multiple ways to view this relationship that should be considered:

#### Option 1: Keep as Separate, Complementary Tenets

These tenets can operate as complementary principles with different focuses:

- **Documentation-First**: Emphasizes writing formal documentation before implementation, focusing on user-facing documentation, conceptual clarity, and design intent
- **Self-Documentation**: Emphasizes making the implementation itself serve as documentation, focusing on code readability, maintainability, and eliminating discrepancies

**Advantages of keeping separate**:
- Maintains distinct focus on both aspects of documentation
- Allows for clearer guidance in different phases of development
- Acknowledges that some documentation needs cannot be met through implementation alone

#### Option 2: Combine into a Unified Documentation Tenet

Alternatively, these concepts could be merged into a single, more comprehensive tenet that views documentation and implementation as a unified system:

**Potential combined tenet**: "Documentation and Implementation as a Unified Whole"

This would emphasize:
- Documentation guiding implementation by establishing clear goals
- Implementation embodying and validating documentation through self-documenting design
- A bidirectional relationship between documentation and code

**Advantages of combining**:
- Creates a more holistic approach to documentation
- Reduces potential contradictions or tensions between tenets
- Might better reflect how documentation and implementation actually interact in practice

#### Option 3: Refine Boundaries Between the Tenets

Keep both tenets but clarify their domains to reduce overlap:

- **Documentation-First**: Focus primarily on user-facing documentation, conceptual explanations, and designs
- **Self-Documentation**: Focus primarily on developer-facing aspects, code organization, and implementation details

**Advantages of refining boundaries**:
- Maintains distinct principles while reducing potential conflicts
- Provides clearer guidance on when to apply each tenet
- Acknowledges the different audiences for documentation

During the review of this CIP, we should carefully consider which approach best serves VibeSafe's goals and provides the most helpful guidance to developers.

## Implementation Status

To implement this tenet, we need to:

- [ ] Create `tenets/vibesafe/self-documentation.md` file with the tenet definition
- [ ] Update `tenets/vibesafe-tenets.md` to include the new tenet
- [ ] Revise README.md to mention this new tenet where appropriate
- [ ] Add it to `.cursor/rules` documentation
- [ ] Apply the tenet to key parts of the codebase as examples

## References

- [CIP-0006: Installation Script Redesign](https://github.com/lawrennd/vibesafe/blob/main/cip/cip0006.md)
- [Tenets System](https://github.com/lawrennd/vibesafe/tree/main/tenets)
- [Literate Programming](https://en.wikipedia.org/wiki/Literate_programming) - Related concept by Donald Knuth
- [Self-Documenting Code](https://www.martinfowler.com/bliki/SelfDocumentingCode.html) - Martin Fowler's perspective

## Author and Date

- **Author**: Neil Lawrence
- **Date**: 2025-05-05 