---
author: "VibeSafe Team"
created: "2026-01-04"
id: "0012"
last_updated: "2026-01-04"  # Accepted 2026-01-04
status: "Accepted"
related_requirements: ["000C"]
related_cips: ["0010"]
tags:
- cip
- framework-independence
- ai-assistants
- portability
title: "AI Assistant Framework Independence Implementation"
---

# CIP-0012: AI Assistant Framework Independence Implementation

> **Note**: CIPs describe HOW to achieve requirements (WHAT).  
> This CIP implements REQ-000C (AI Assistant Framework Independence).

## Status

- [x] Proposed - Initial idea documented
- [x] Accepted - Approved, ready to start work
- [ ] In Progress - Actively being implemented
- [ ] Implemented - Work complete, awaiting verification
- [ ] Closed - Verified and complete
- [ ] Rejected - Will not be implemented (add reason, use superseded_by if replaced)
- [ ] Deferred - Postponed (use blocked_by field to indicate blocker)

## Summary

Implement framework independence for VibeSafe by creating a **base prompts architecture** where platform-agnostic content lives in `templates/prompts/` and is generated into platform-specific formats during installation. This allows VibeSafe to work seamlessly across different AI coding assistants (Cursor, Claude Code, GitHub Copilot, Codex, etc.) without maintaining duplicate content or being tied to any specific platform.

**Key Innovation**: Single source of truth (`templates/prompts/`) → multiple platform outputs (`.cursor/rules/`, `.github/copilot/prompts/`, `.claude/context/`, etc.) generated at install-time.

**Which requirements does this CIP address?** REQ-000C (AI Assistant Framework Independence)

## Motivation

Currently, VibeSafe architecture is already framework-independent (uses standard markdown + YAML), but the naming and documentation create a **Cursor-specific perception**:

1. `.cursor/rules/` directory naming suggests Cursor-only support
2. Function names like `generate_tenet_cursor_rules()` mention "cursor"
3. Documentation references "Cursor rules for IDE integration"
4. Users may believe VibeSafe only works with Cursor

**Why this matters:**
- **User Autonomy**: Users should choose their own AI assistant
- **Broader Adoption**: Don't limit VibeSafe to Cursor users only
- **Future-Proofing**: AI assistant landscape is evolving rapidly
- **Portability**: Standard formats enable cross-platform use

**Current State:**
- ✅ Content is portable (markdown + YAML)
- ✅ No platform-specific APIs used
- ✅ File-based organization works everywhere
- ⚠️ Naming and docs are Cursor-centric

## Detailed Description

### Architecture Analysis

VibeSafe's **core architecture is already framework-independent**:

```
Core Components (Already Portable):
├── CIPs: Standard markdown + YAML frontmatter
├── Backlog: Standard markdown + YAML frontmatter  
├── Requirements: Standard markdown + YAML frontmatter
├── Tenets: Standard markdown + YAML frontmatter
└── Scripts: Python (portable)

NEW ARCHITECTURE (Generate from Base Prompts):
└── templates/prompts/ ← Platform-agnostic base content
    ├── backlog_prompt.md
    ├── cip_prompt.md
    ├── requirements_prompt.md
    └── ...
    
    Installation generates platform-specific files:
    ├── .cursor/rules/ ← Generated for Cursor
    ├── .github/copilot/prompts/ ← Generated for Copilot
    ├── .claude/context/ ← Generated for Claude Code
    └── .ai/context/ ← Generic fallback
```

### Key Changes

1. **Base Prompts as Source of Truth**
   - Create `templates/prompts/` directory with platform-agnostic content
   - All prompt content lives here (backlog, CIP, requirements, tenets, etc.)
   - Single source of truth, multiple output formats

2. **Installation-Time Generation**
   - `install-minimal.sh` generates platform-specific files from base prompts
   - Auto-detect or accept platform flag: `--platform=cursor|copilot|claude|all`
   - Default to generating all common platforms for maximum compatibility

3. **Generic Internal Naming**
   - Rename functions: `generate_tenet_cursor_rules()` → `generate_ai_prompts()`
   - Update comments: "cursor rules" → "AI prompts" or "AI context"
   - Keep variable names platform-neutral

4. **Platform Adapters**
   - Create simple adapter functions for each platform
   - Handle platform-specific formatting (YAML frontmatter variations, etc.)
   - Easy to add new platforms without touching base prompts

## Implementation Plan

### Phase 1: Base Prompts Infrastructure (Week 1)

1. **Create `templates/prompts/` directory**:
   - Move current `.cursor/rules/*.mdc` content to base prompts
   - Strip platform-specific metadata (keep content generic)
   - Use simple markdown format (add platform wrappers later)

2. **Create base prompt files**:
   ```
   templates/prompts/
   ├── backlog.md          # Generic backlog system description
   ├── cip.md              # Generic CIP process description  
   ├── requirements.md     # Generic requirements description
   ├── tenets.md           # Generic tenets description
   ├── vibesafe_general.md # Generic VibeSafe guidelines
   └── whats_next.md       # Generic what's next description
   ```

3. **Create platform adapter functions** in `install-minimal.sh`:
   ```bash
   # Generate prompts for a specific platform
   generate_prompts_for_platform() {
     local platform=$1
     local base_dir=$2
     
     case $platform in
       cursor)
         generate_cursor_rules "$base_dir"
         ;;
       copilot)
         generate_copilot_prompts "$base_dir"
         ;;
       claude)
         generate_claude_context "$base_dir"
         ;;
       *)
         generate_generic_context "$base_dir"
         ;;
     esac
   }
   ```

### Phase 2: Platform Generation Logic (Week 2)

1. **Implement platform-specific generators**:
   ```bash
   # Cursor: Add YAML frontmatter, use .mdc extension
   generate_cursor_rules() {
     local base_dir=$1
     mkdir -p .cursor/rules
     for prompt in "$base_dir"/templates/prompts/*.md; do
       basename=$(basename "$prompt" .md)
       add_cursor_frontmatter "$prompt" > ".cursor/rules/${basename}.mdc"
     done
   }
   
   # Copilot: Use .github/copilot/prompts/, simpler format
   generate_copilot_prompts() {
     local base_dir=$1
     mkdir -p .github/copilot/prompts
     cp "$base_dir"/templates/prompts/*.md .github/copilot/prompts/
   }
   
   # Claude Code: Use .claude/context/, add metadata
   generate_claude_context() {
     local base_dir=$1
     mkdir -p .claude/context
     # ... adapt format for Claude Code
   }
   ```

2. **Add platform detection/selection**:
   - Environment variable: `VIBESAFE_PLATFORM=cursor|copilot|claude|all`
   - Default: `all` (generate for all platforms)
   - Users can specify one platform to minimize footprint

3. **Update `combine_tenets.py`**:
   - Rename: `--generate-cursor-rules` → `--generate-prompts`
   - Add: `--platform` flag
   - Output to `templates/prompts/` (base), let install script generate platform files

### Phase 3: Documentation Update (Week 2-3)

1. **Update README.md**:
   - Add "Framework Independence" section
   - Explain that VibeSafe works with any AI assistant
   - Provide platform-specific setup instructions

2. **Update CIP/Backlog rules**:
   - Update `.cursor/rules/*.mdc` files to be platform-neutral
   - Mention they work with any AI assistant that can read markdown

3. **Create platform-specific guides** (optional):
   - `docs/setup-cursor.md`
   - `docs/setup-claude-code.md`
   - `docs/setup-copilot.md`

### Phase 4: Testing & Validation (Week 3-4)

1. **Test with multiple platforms**:
   - Verify Cursor can still read `.cursor/rules/` AND `.ai/context/`
   - Test with Claude Code (if available)
   - Test with GitHub Copilot (if available)
   - Document any platform-specific quirks

2. **Backward compatibility testing**:
   - Ensure existing VibeSafe installations still work
   - Test that old `.cursor/rules/` path still functions
   - Verify installation script handles both paths

3. **Update acceptance criteria**:
   - Check off REQ-000C acceptance criteria as validated

## Backward Compatibility

**High priority**: Maintain full backward compatibility.

### Compatibility Strategy:

1. **Keep `.cursor/rules/` working**:
   - Default platform includes Cursor (backward compatibility)
   - Existing Cursor users see no changes
   - Files still generated in `.cursor/rules/`

2. **Add other platforms by default**:
   - Install for `all` platforms by default (minimal disk space)
   - Users get Cursor + Copilot + Claude + generic support out of the box
   - Can opt-in to single platform: `VIBESAFE_PLATFORM=cursor ./install-minimal.sh`

3. **Base prompts are the change**:
   - User-facing: no changes (`.cursor/rules/` still works)
   - Internal: cleaner architecture (`templates/prompts/` as source)
   - Future: easy to add new platforms without touching core content

### Architecture:

```
OLD (Current):
└── templates/.cursor/rules/  ← Platform-specific source
    └── Installed to: .cursor/rules/

NEW (Better):
└── templates/prompts/  ← Platform-agnostic source
    ├── Installed to: .cursor/rules/ (Cursor format)
    ├── Installed to: .github/copilot/prompts/ (Copilot format)
    ├── Installed to: .claude/context/ (Claude format)
    └── Installed to: .ai/context/ (Generic format)
```

Users see their preferred platform supported automatically. No migration needed.

## Testing Strategy

### Unit Tests:

1. **Installation script tests** (add to `scripts/test/install-test.bats`):
   ```bash
   @test "install creates .ai/context directory" {
     run ./scripts/install-minimal.sh
     [ -d ".ai/context" ]
   }
   
   @test "install creates backward-compatible .cursor/rules" {
     run ./scripts/install-minimal.sh
     [ -d ".cursor/rules" ]
   }
   
   @test "AI context files are identical in both locations" {
     run ./scripts/install-minimal.sh
     diff .ai/context/backlog.mdc .cursor/rules/backlog.mdc
   }
   ```

2. **Function rename tests**:
   - Test `generate_ai_context_files()` produces correct output
   - Verify both `.ai/context/` and `.cursor/rules/` populated

### Integration Tests:

1. **Platform compatibility tests**:
   - Test that Cursor can read both `.cursor/rules/` and `.ai/context/`
   - Document testing with other platforms (manual for now)

2. **Backward compatibility tests**:
   - Test existing VibeSafe projects upgrade smoothly
   - Verify no breaking changes for current users

### Validation:

Map testing results to REQ-000C acceptance criteria:
- [ ] Core functionality works with Cursor AI
- [ ] Core functionality works with Claude Code (manual test)
- [ ] Core functionality works with GitHub Copilot (manual test)
- [ ] Core functionality works with other AI assistants (manual test)
- [ ] No platform-specific APIs required
- [ ] Documentation clearly states framework independence
- [ ] Installation works identically across platforms
- [ ] AI assistants understand file-based organization

## Related Requirements

This CIP addresses the following requirements:

- **REQ-000C**: AI Assistant Framework Independence

Specifically, it implements solutions for:
- Multi-platform AI context discovery (`.ai/context/` + `.cursor/rules/`)
- Generic internal naming (remove "cursor" from function names)
- Platform-neutral documentation
- Backward compatibility for existing Cursor users

## Related CIPs

- **CIP-0010**: Automatic Tenets-to-Cursor-Rules Generation
  - This CIP refactors CIP-0010 to be platform-neutral
  - `generate_cursor_rules_from_tenets()` becomes `generate_ai_context_from_tenets()`

## Implementation Status

### Phase 1: Base Prompts Infrastructure
- [ ] Research platform-specific discovery paths (Cursor, Copilot, Claude Code)
- [ ] Create `templates/prompts/` directory structure
- [ ] Move current `.cursor/rules/*.mdc` content to base prompts (strip platform metadata)
- [ ] Create platform adapter functions in `install-minimal.sh`

### Phase 2: Platform Generation Logic
- [ ] Implement `generate_cursor_rules()` with YAML frontmatter wrapper
- [ ] Implement `generate_copilot_prompts()` for GitHub Copilot
- [ ] Implement `generate_claude_context()` for Claude Code
- [ ] Add platform detection/selection (VIBESAFE_PLATFORM env var)
- [ ] Update `combine_tenets.py` to generate to `templates/prompts/`

### Phase 3: Documentation Update
- [x] Add "Framework Independence" section to README.md
- [ ] Update all base prompts to be platform-neutral
- [ ] Create platform-specific setup guides (optional)

### Phase 4: Testing & Validation
- [ ] Write installation tests for multi-platform generation
- [ ] Test with Cursor (primary platform)
- [ ] Test with Claude Code (if available)
- [ ] Test with GitHub Copilot (if available)
- [ ] Validate against REQ-000C acceptance criteria

## References

- **REQ-000C**: AI Assistant Framework Independence (`requirements/req000C_ai-assistant-framework-independence.md`)
- **CIP-0010**: Automatic Tenets-to-Cursor-Rules Generation (`cip/cip0010.md`)
- **Tenet: User Autonomy Over Prescription** (`tenets/vibesafe/user-autonomy.md`)
- **Tenet: Simplicity at All Levels** (`tenets/vibesafe/simplicity-of-use.md`)

## Notes

### Design Decisions

1. **Why `templates/prompts/` as base instead of platform directories?**
   - Single source of truth - easier to maintain
   - Platform differences are just formatting, not content
   - Adding new platforms doesn't require duplicating content
   - Cleaner separation: content vs. delivery format

2. **Why generate for all platforms by default?**
   - Disk space is minimal (few KB per platform)
   - Users don't need to know which AI assistant they'll use
   - Respects user autonomy (choose any tool)
   - Simpler than detection logic

3. **Why maintain `.cursor/rules/` compatibility?**
   - Large existing user base on Cursor
   - No benefit to forcing migration
   - Generated from same base prompts as other platforms
   - Smooth transition respects user autonomy

### Open Questions

1. **Should we auto-detect which AI assistant is running?**
   - Could optimize by only generating for detected platform
   - Trade-off: complexity vs. ~10KB disk savings
   - Decision: Generate for all by default (simpler, respects user choice)

2. **Should base prompts be in templates/prompts/ or a separate repo?**
   - Separate repo could enable versioning and easier sharing
   - But adds complexity for most users
   - Decision: Keep in templates/prompts/ for simplicity

3. **What format should base prompts use?**
   - Pure markdown (no frontmatter) + add platform wrappers during generation
   - Avoids platform-specific syntax in base files
   - Decision: Pure markdown with clear section headers

## Timeline

- **Week 1**: Phase 1 (Multi-Path Support)
- **Week 2**: Phase 2 (Generic Naming) + start Phase 3 (Documentation)
- **Week 3**: Complete Phase 3 (Documentation) + start Phase 4 (Testing)
- **Week 4**: Complete Phase 4 (Testing) + validation

**Total estimated effort**: 3-4 weeks

## Success Criteria

This CIP is complete when:
- [x] All acceptance criteria in REQ-000C are met
- [ ] VibeSafe installs to both `.ai/context/` and `.cursor/rules/`
- [ ] Internal naming uses generic terms ("AI context" not "cursor rules")
- [ ] Documentation emphasizes framework independence
- [ ] Backward compatibility is maintained 100%
- [ ] Tests validate multi-platform support
- [ ] At least one non-Cursor platform has been tested successfully

